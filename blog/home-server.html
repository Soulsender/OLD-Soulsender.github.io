<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Home Server - Soulsender</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/vendor.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>
    <script defer src="js/fontawesome/all.min.js"></script>

    <!-- favicons
    ================================================== -->
    <link rel="icon" href="../favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">

</head>

<body id="top">


    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader"></div>
    </div>


    <!-- header
    ================================================== -->
    <header class="s-header s-header--blog">
        <div class="row">

            <div class="s-header__logo">
                <a href="../index.html">
                    
                </a>
            </div>

            <nav class="s-header__nav">
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li class="current"><a href="">Blog</a></li>
                </ul>
            </nav>

            <a class="s-header__menu-toggle" href="#0" title="Menu">
                <span class="s-header__menu-icon"></span>
            </a>

            

        </div> <!-- end row -->
    </header> <!-- end s-header -->


    <!-- blog content
    ================================================== -->
    <div class="blog-content">

        <div class="row blog-post-wrap">
            <div class="column large-12">

                <article class="blog-post">

                    <div class="blog-post__header">
                        <h1 class="blog-post__title">Setting Up a Laptop Home Server</h1>
                        
                        <div class="blog-post__meta">

                            <div class="blog-post__date">Dec 12, 2022</div>

                        </div>
                    </div> <!-- blog-post__header -->

                    <div class="blog-post__content">

                        <p class="lead drop-cap">
                            Old electronics. 
                        </p>

                        Many people just have old electronics lying around their house collecting dust. Once they get a new laptop or tablet, what use are old devices? Well there are plenty of different things you can do with them once they've expired past their best before date. One of which is using it as a server.

                        
                        <h2>Table Of Contents</h2>
                        <nav>
                            <ul>
                                <li><a class="smoothscroll" href="#server">Wait, A Server?</a></li>
                                <li><a class="smoothscroll" href="#ubuntu">Step 1: Installing and Configuring Ubuntu Sever</a></li>
                            </ul>
                        </nav>

                        <h3 id="server">Wait, A Server?</h3>

                        Yeah. A server doesn't have to be this absolute monster of a machine with 256gb of RAM and fancy SSDs and HDDs and crap. Nope, all it needs to be is a computer that runs some kind of server operating server - such as Windows Server, some variant of Linux, BSD, or any other miscellaneous OS depending on your project such as unRaid or TrueNAS.

                        <br><br>

                        In my case, I chose <a href="https://ubuntu.com/download/server">Ubuntu server 22.04</a>. I chose it because it is relatively lightweight, easy to setup, and includes drivers for many things on the device. I considered Proxmox as well, but decided to stick with Ubuntu server which I will set up to use <a href="https://www.portainer.io/">Portainer</a> - a web GUI for managing docker containers.

                        <br><br>

                        The device I am using is a old Dell Inspirion that my friend graciously gave to me. The screen is falling apart and you can see the exposed wiring and behind the screen which is a little iffy. Fortunately, it works great for our use case, as I will not really be using the display for anything aside from the installation of Ubuntu server. The laptop itself has 8gb of RAM and a 256gb SSD, as well as an ethernet port which is great, and not something you find often on laptops much anymore.

                        <h3 id="ubuntu">Step 1: Installing Ubuntu server</h3>

                        <h5>The OS Installation</h5>
                        As per usual with any Linux distro, I had to mess with the system's BIOS before I could launch the installation media. This really just involves changing the boot order, making sure UEFI boot is enabled, and disabling secure boot.

                        <br><br>

                        <blockquote>
                            I tried to use a ventoy usb to install Ubuntu server, but whenever I tried to boot it would cause a kernel panic and fail, so I instead just flashed the Ubuntu server iso onto a 8gb flash drive I had and installed from that.
                        </blockquote>

                        The installation was very straightforward, as Ubuntu server has a nice TUI installation interface. I debated using encryption, but decided not to in the end as it would interrupt the boot whenever the machine rebooted, and add extra complexity. I don't intend on storing anything particularly sensitive on it, so this is okay. 

                        <h5>Inital System Checks</h5>

                        Once the installation had finished, the machine booted to the very-friendly tty prompt. I updated and upgraded the system, installed docker (and neofetch of course) and checked my local IP address I had been assigned my my router.
                        <br><br>
                        
                        <div class="codeblock">
                            <code>sudo apt update -y && sudo apt upgrade -y</code><br>
                            <code>sudo apt install docker.io neofetch</code><br>
                            <code>ip a</code>
                        </div>
                        
                        <br>

                        <blockquote>
                            Be careful here, as sometimes Ubuntu will install the <b>snap</b> package version of Docker instead of the <b>apt</b> version. The snap version can cause some errors with portainer.
                        </blockquote>
                            
                        <h5>Creating a Static IP</h5>

                        I also had to configure the device to use a static IP that would not change. This would make it easier to isolate it on my network. To do this, you must edit the config file

                        <br><br>
                        <div class="codeblock"><code>/etc/netplan/00-installer-config.yaml</code></div>
                        <br>

                        and edit the respective interface config:

                        <br><br>
                        <div class="codeblock">
                            <code>
                            <pre>
    network:
        ethernets:
            enp1s0:
            addresses: [192.168.1.70/24]
            gateway4: 192.168.1.254
            nameservers:
                addresses: [1.1.1.1, 8.8.8.8]
            dhcp4: false
        version: 2</pre>
                            </code>
                        </div>
                        <br>

                        <ul>
                            <li><b>ethernets</b> - this line defines that we will be using ethernet instead of wifi. </li>
                            <li><b>enp1s0</b> - this is the name of the interface we will be using. You can get a list of these with the command "ip link". Wireless interfaces will usually start with a W and ethernet interfaces will usually start with an E.</li>
                            <li><b>addresses</b> - this defines the actual static IP we would like to assign. In my case it is "192.168.1.70". "/24" defines the subnet of the network, which is basically what IP addresses are allowed to be assigned.</li>
                            <li><b>gateway4</b> - this is the IP of the router we will use, also known as the gateway. You can find this with the command "ip route".</li>
                            <li><b>nameservers</b> - these are the DNS servers you would like to use for your system. In this case I have "1.1.1.1" and "8.8.8.8" which are cloudflare and google's DNS servers, although you are free to use a different one or even run your own!</li>
                            <li><b>dhcp4</b> - this just tells the system that we do not want to use DHCP to obtain our local IP address, but rather use the one we've already specified.</li>
                        </ul>

                        <h5>Laptop Tricks</h5>

                        Because this was a laptop, I would like to be able to close the screen and not have to worry about it shutting down. Thanks to <a href="https://www.youtube.com/watch?v=HxvFuGnjoJo&t=1013s">TechHut</a> for this. This is very easy to do, and only requires a configuration change in

                        <br><br>
                        <div class="codeblock">
                            <code>/etc/systemd/login.conf</code>
                        </div>

                        <br>
                        and set this

                        <br><br>
                        <div class="codeblock"><code>
                            HandleSuspendKey=ignore<br>
                            HandleLidSwitch=ignore
                        </code></div>
                        
                        


                    </div> <!-- end blog-post__content -->

                </article> <!-- blog post -->


    <!-- Java Script
    ================================================== -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

</body>

</html>